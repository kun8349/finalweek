import{_ as y,a as v,m as w,c as l,b as t,d as x,w as C,F as c,j as I,t as i,A as u,B as p,z as _,r as k,o as a,p as S,f as L}from"./index-3fcaab0f.js";import{S as m}from"./sweetalert2.all-b8d7a61b.js";import{c as h}from"./cart-aa05d7a4.js";const{VITE_URL:V,VITE_PATH:T}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"kevin-jiang",BASE_URL:"/finalweek/",MODE:"production",DEV:!1,PROD:!0},A={data(){return{isLoading:!1,data:{user:{name:"",email:"",tel:"",address:""},message:""},code:""}},methods:{editNum(e){const n={product_id:e.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${V}api/${T}/cart/${e.id}`,{data:n}).then(b=>{m.fire({position:"top-end",icon:"success",title:"成功修改數量",showConfirmButton:!1,timer:1500,toast:!0,customClass:{container:"swal2-container"}}),this.getToCart(),this.loadingItem=""}).catch(()=>{m.fire({icon:"error",title:"修改數量失敗(｡ŏ_ŏ)",showConfirmButton:!1,timer:1500})})},returnRouter(){this.$router.push("/order")},returnRouterHome(){this.$router.push("/"),window.scrollTo(0,0)},...v(h,["deleteSingle","getToCart","getCoupon"])},computed:{...w(h,["cart","loadingItem","total","couponPrice"])},mounted(){this.getToCart()}},o=e=>(S("data-v-aef89485"),e=e(),L(),e),E=o(()=>t("div",{id:"load"},[t("div",null,"G"),t("div",null,"N"),t("div",null,"I"),t("div",null,"D"),t("div",null,"A"),t("div",null,"O"),t("div",null,"L")],-1)),R={class:"container"},j=o(()=>t("h2",{class:"my-12"},"購物車清單",-1)),B=o(()=>t("div",{class:"w-75 mx-auto mt-30"},[t("ul",{class:"progressbar list-unstyled d-flex justify-content-between mb-0"},[t("li",{class:"active"},"購物車"),t("li",null,"填寫資料"),t("li",null,"完成訂單")]),t("div",{class:"progress",style:{height:"5px"}},[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"33.3","aria-valuemin":"0","aria-valuemax":"100",style:{width:"1%"}})])],-1)),U={class:"border border-secondary mt-15 mb-15"},D=o(()=>t("div",{class:"w-100 bg-secondary p-4"},[t("p",{class:"mb-0"},"購物車")],-1)),N={class:"p-4 pb-30"},$={key:0,class:"table align-middle mb-0"},q=o(()=>t("thead",null,[t("tr",null,[t("th",{width:"50px",class:"text-center"},"刪除"),t("th",{scope:"col",class:"text-center"},"品名"),t("th",{scope:"col",width:"100px"},"單價"),t("th",{scope:"col",width:"220px",class:"text-center"},"數量"),t("th",{class:"text-end",width:"150px"},"小計")])],-1)),F={class:""},H=["onClick","disabled"],O=o(()=>t("span",{class:"material-symbols-outlined"}," delete ",-1)),M=[O],z={class:"text-center"},G={class:"fs-5"},J={class:"d-flex justify-content-center"},K={class:"input-group w-50"},Q=["onUpdate:modelValue","onChange","disabled"],W={class:"input-group-text bg-secondary border-secondary"},X={class:"text-end fs-5"},Y=o(()=>t("td",null,null,-1)),Z=o(()=>t("td",null,null,-1)),P=o(()=>t("td",null,null,-1)),tt=o(()=>t("td",null,null,-1)),et={class:"fs-5 text-end"},st=o(()=>t("div",{class:"mt-3"},[t("button",{type:"button",class:"btn btn-outline-primary",style:{width:"100px"}}," 繼續購物 ")],-1)),ot={key:1,class:"text-center py-6"},nt=o(()=>t("h2",{class:"pb-5"},"購物車目前沒有商品",-1)),lt={class:"mt-10 d-flex align-items-end justify-content-between"},it={class:"d-flex flex-column justify-content-between"},at={class:"d-flex mt-10"},dt=o(()=>t("label",{for:"exampleFormControlInput1",class:"form-label"},null,-1)),rt={class:"text-end"},ct={class:"fs-4 text-success mb-5"},ut={key:0},pt={key:1},_t={class:"fs-4 text-end fw-bold mb-5"},mt=["disabled"];function ht(e,n,b,bt,d,r){const g=k("AppLoading");return a(),l(c,null,[t("div",null,[x(g,{active:d.isLoading,"onUpdate:active":n[0]||(n[0]=s=>d.isLoading=s)},{default:C(()=>[E]),_:1},8,["active"])]),t("div",R,[j,B,t("div",U,[D,t("div",N,[e.cart.length!==0?(a(),l("table",$,[q,t("tbody",F,[(a(!0),l(c,null,I(e.cart,s=>(a(),l("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-sm btn-outline-danger d-flex justify-content-center align-items-center",onClick:()=>e.deleteSingle(s),disabled:e.loadingItem===s.id},M,8,H)]),t("td",z,i(s.product.title),1),t("td",G,i(s.product.price),1),t("td",J,[t("div",K,[u(t("input",{"onUpdate:modelValue":f=>s.qty=f,type:"number",min:"1",class:"form-control border-secondary",onChange:()=>r.editNum(s),disabled:e.loadingItem===s.id},null,40,Q),[[p,s.qty]]),t("span",W,i(s.product.unit),1)])]),t("td",X," $"+i(s.total.toLocaleString()),1)]))),128)),t("tr",null,[Y,Z,P,tt,t("td",et," 總計： $"+i(e.total.toLocaleString()),1)]),st])])):(a(),l("div",ot,[nt,t("button",{type:"button",class:"btn btn-primary btn-lg",onClick:n[1]||(n[1]=()=>r.returnRouterHome())}," 前往選購 ")])),t("div",lt,[t("div",it,[t("div",at,[dt,u(t("input",{type:"text",class:"form-control me-2",id:"exampleFormControlInput1",style:{width:"100px"},"onUpdate:modelValue":n[2]||(n[2]=s=>d.code=s)},null,512),[[p,d.code]]),t("button",{type:"button",class:"btn btn-outline-primary",onClick:n[3]||(n[3]=()=>e.getCoupon(d.code))}," 優惠碼 ")])]),t("div",rt,[t("p",ct,[_(" 折扣：$ "),e.couponPrice!=0?(a(),l("span",ut,i(e.couponPrice),1)):(a(),l("span",pt,"0"))]),t("p",_t,[_(" 訂單總金額：$ "),t("span",null,i((e.total-e.couponPrice).toLocaleString()),1)]),t("button",{onClick:n[4]||(n[4]=()=>r.returnRouter()),type:"button",class:"btn btn-primary btn-lg",disabled:e.cart.length===0}," 確認結帳 ",8,mt)])])])])])],64)}const vt=y(A,[["render",ht],["__scopeId","data-v-aef89485"]]);export{vt as default};
