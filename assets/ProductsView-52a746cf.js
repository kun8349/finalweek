import{P as x}from"./PaginationView-c0df20b2.js";import{_ as I,a as w,m,c,b as t,d as p,w as v,n as g,F as h,j as f,t as d,r as _,o as n,l as E,p as S,f as T}from"./index-2a2e8a5d.js";import{c as y}from"./cart-60d806ed.js";import{S as C}from"./sweetalert2.all-0ad3daf2.js";const{VITE_URL:P,VITE_PATH:b}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"kevin-jiang",BASE_URL:"/finalweek/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{products:{},isLoading:!0,currentPage:1,pages:{},productsAll:[],changeColor:"全部商品",categoryCat:[],categoryDog:[]}},components:{Pagination:x},methods:{getProducts(a=1){this.isLoading=!0,this.currentPage=a,this.$http.get(`${P}api/${b}/products/?page=${a}`).then(o=>{this.products=o.data.products,this.pages=o.data.pagination,this.isLoading=!1}).catch(()=>{C.fire({icon:"error",title:"取得產品資料失敗٩(ŏ﹏ŏ、)۶",showConfirmButton:!1,timer:1500})})},getProductsAll(){this.isLoading=!0,this.$http.get(`${P}api/${b}/products/All`).then(a=>{this.productsAll=a.data.products;const o=this.productsAll.filter(e=>e.category.includes("貓")),s=this.productsAll.filter(e=>e.category==="餵食容器");this.categoryProductCat=o.concat(s),this.categoryProductCat.forEach(e=>{this.categoryCat.includes(e.category)||this.categoryCat.push(e.category)});const i=this.productsAll.filter(e=>e.category.includes("狗")),l=this.productsAll.filter(e=>e.category==="餵食容器");this.categoryProductDog=i.concat(l),this.categoryProductDog.forEach(e=>{this.categoryDog.includes(e.category)||this.categoryDog.push(e.category)}),this.isLoading=!1}).catch(()=>{C.fire({icon:"error",title:"取得產品資料失敗٩(ŏ﹏ŏ、)۶",showConfirmButton:!1,timer:1500})})},filterItem(a,o){if(this.isLoading=!0,this.changeColor=o,o==="全部商品")this.getProducts(),this.isLoading=!1;else if(o==="貓零食"){let s=[];s=a.filter(i=>i.category==="貓零食"),this.products=s,this.currentPage=0,this.isLoading=!1}else if(o==="貓飼料"){let s=[];s=a.filter(i=>i.category==="貓飼料"),this.products=s,this.currentPage=0,this.isLoading=!1}else if(o==="貓主食罐"){let s=[];s=a.filter(i=>i.category==="貓主食罐"),this.products=s,this.currentPage=0,this.isLoading=!1}else if(o==="貓抓板"){let s=[];s=a.filter(i=>i.category==="貓抓板"),this.products=s,this.currentPage=0,this.isLoading=!1}else if(o==="貓咪玩具"){let s=[];s=a.filter(i=>i.category==="貓咪玩具"),this.products=s,this.currentPage=0,this.isLoading=!1}else if(o==="餵食容器"){let s=[];s=a.filter(i=>i.category==="餵食容器"),this.products=s,this.currentPage=0,this.isLoading=!1}else if(o==="狗飼料"){let s=[];s=a.filter(i=>i.category==="狗飼料"),this.products=s,this.currentPage=0,this.isLoading=!1}else if(o==="狗主食罐"){let s=[];s=a.filter(i=>i.category==="狗主食罐"),this.products=s,this.currentPage=0,this.isLoading=!1}else if(o==="貓咪專區"){const s=this.productsAll.filter(e=>e.category.includes("貓")),i=this.productsAll.filter(e=>e.category==="餵食容器"),l=s.concat(i);this.products=l,this.currentPage=0,this.isLoading=!1}else if(o==="狗狗專區"){const s=this.productsAll.filter(e=>e.category.includes("狗")),i=this.productsAll.filter(e=>e.category==="餵食容器"),l=s.concat(i);this.products=l,this.currentPage=0,this.isLoading=!1}},...w(y,["addToCart"])},mounted(){this.getProducts(),this.getProductsAll()},computed:{...m(y,["cart"]),...m(y,["loadingItem"])}},k=a=>(S("data-v-ae5ab895"),a=a(),T(),a),B=k(()=>t("div",{id:"load"},[t("div",null,"G"),t("div",null,"N"),t("div",null,"I"),t("div",null,"D"),t("div",null,"A"),t("div",null,"O"),t("div",null,"L")],-1)),j={class:"container"},N={class:"row mt-13"},U={class:"col-lg-3"},R={class:"bg-secondary"},O=k(()=>t("h3",{class:"mb-0 p-4 fs-5 fw-semibold"},"產品類型",-1)),F={class:"list-unstyled bg-white"},H={class:"p-4"},M={class:"p-4"},z={class:"collapse",id:"collapseCat"},G={class:"list-unstyled mt-4"},q=["onClick"],J={class:"p-4"},K={class:"collapse",id:"collapseDog"},Q={class:"list-unstyled mt-4"},W=["onClick"],X={class:"col-lg-9"},Y={class:"p-4"},Z={class:"row"},$={class:"card border-0 rounded-0 mb-4 card-overlay"},tt={class:"position-relative"},st=["src"],et={class:"overlay d-flex justify-content-center align-items-end"},ot=["onClick","disabled"],it={class:"card-body text-center"},at={class:"card-title text-hover-black"},lt={class:"text-primary mb-1 fs-5"},rt={class:"text-textSecondary"},ct={key:0,class:"d-flex justify-content-center"};function nt(a,o,s,i,l,e){const L=_("AppLoading"),A=_("router-link"),D=_("Pagination");return n(),c(h,null,[t("div",null,[p(L,{active:l.isLoading,"onUpdate:active":o[0]||(o[0]=r=>l.isLoading=r)},{default:v(()=>[B]),_:1},8,["active"])]),t("div",j,[t("div",N,[t("div",U,[t("div",R,[O,t("ul",F,[t("li",H,[t("a",{class:g(["fs-6 title-active d-block",{"text-primary":this.changeColor=="全部商品"}]),href:"#/product",onClick:o[1]||(o[1]=()=>e.filterItem(l.products,"全部商品"))}," 全部商品 ",2)]),t("li",M,[t("a",{class:g(["fs-6 d-block",{"text-primary":this.changeColor=="貓咪專區"}]),"data-bs-toggle":"collapse",href:"#collapseCat",role:"button","aria-expanded":"false","aria-controls":"collapseCat",onClick:o[2]||(o[2]=()=>e.filterItem(l.productsAll,"貓咪專區"))}," 貓咪專區 ",2),t("div",z,[t("ul",G,[(n(!0),c(h,null,f(l.categoryCat,(r,u)=>(n(),c("li",{key:u+"categoryCat",class:g(["fs-6 d-block p-4 title-hover",{"text-primary":this.changeColor==r}]),onClick:()=>e.filterItem(l.productsAll,r)},d(r),11,q))),128))])])]),t("li",J,[t("a",{class:g(["fs-6 d-block",{"text-primary":this.changeColor=="狗狗專區"}]),"data-bs-toggle":"collapse",href:"#collapseDog",role:"button","aria-expanded":"false","aria-controls":"collapseDog",onClick:o[3]||(o[3]=()=>e.filterItem(l.productsAll,"狗狗專區"))}," 狗狗專區 ",2),t("div",K,[t("ul",Q,[(n(!0),c(h,null,f(l.categoryDog,(r,u)=>(n(),c("li",{key:u+"categoryDog",class:g(["fs-6 d-block p-4 title-hover",{"text-primary":this.changeColor==r}]),onClick:()=>e.filterItem(l.productsAll,r)},d(r),11,W))),128))])])])])])]),t("div",X,[t("h4",Y,d(l.changeColor),1),t("div",Z,[(n(!0),c(h,null,f(l.products,r=>(n(),c("div",{class:"col-lg-3",key:r.id},[p(A,{to:`/product/${r.id}`},{default:v(()=>[t("div",$,[t("div",tt,[t("img",{src:r.imageUrl,class:"card-img-top rounded-0",alt:"貓咪產品"},null,8,st),t("div",et,[t("button",{type:"button",class:"mb-0 text-white m-0 p-2 bg-primary w-100 fs-5 d-flex justify-content-center opacity-75 btn btn-sm btn-primary btn-hover",onClick:E(()=>a.addToCart(r.id),["prevent"]),disabled:a.loadingItem===r.id}," 加入購物車 ",8,ot)])]),t("div",it,[t("h5",at,d(r.title),1),t("p",lt,"NT$"+d(r.price),1),t("del",rt,"NT$"+d(r.origin_price),1)])])]),_:2},1032,["to"])]))),128))]),!l.currentPage==0?(n(),c("div",ct,[p(D,{pages:l.pages,onEmitPages:e.getProducts},null,8,["pages","onEmitPages"])])):(n(),c(h,{key:1},[],64))])])])],64)}const pt=I(V,[["render",nt],["__scopeId","data-v-ae5ab895"]]);export{pt as default};
