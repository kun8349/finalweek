import{l as Y,q as J,s as K,u as q,v as W,_ as Z,S as w,x as tt,a as et,m as V,c as T,b as n,d as O,w as D,F as U,i as G,t as x,y as at,z as lt,A as st,e as nt,r as z,o as B,B as it,p as ot,f as rt}from"./index-68afc904.js";import{c as F}from"./cart-1f0b8f81.js";import{S as R}from"./sweetalert2.all-281a79b7.js";function ct(t,f,d,u){return t.params.createElements&&Object.keys(u).forEach(s=>{if(!d[s]&&d.auto===!0){let m=Y(t.el,`.${u[s]}`)[0];m||(m=J("div",u[s]),m.className=u[s],t.el.append(m)),d[s]=m,f[s]=m}}),d}function k(t=""){return`.${t.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function dt({swiper:t,extendParams:f,on:d,emit:u}){const s="swiper-pagination";f({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),t.pagination={el:null,bullets:[]};let m,_=0;const y=e=>(Array.isArray(e)||(e=[e].filter(a=>!!a)),e);function I(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function L(e,a){const{bulletActiveClass:l}=t.params.pagination;e&&(e=e[`${a==="prev"?"previous":"next"}ElementSibling`],e&&(e.classList.add(`${l}-${a}`),e=e[`${a==="prev"?"previous":"next"}ElementSibling`],e&&e.classList.add(`${l}-${a}-${a}`)))}function c(e){const a=e.target.closest(k(t.params.pagination.bulletClass));if(!a)return;e.preventDefault();const l=q(a)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===l)return;(l<t.loopedSlides||l>t.slides.length-t.loopedSlides)&&t.loopFix({direction:l<t.loopedSlides?"prev":"next",activeSlideIndex:l,slideTo:!1}),t.slideToLoop(l)}else t.slideTo(l)}function b(){const e=t.rtl,a=t.params.pagination;if(I())return;let l=t.pagination.el;l=y(l);let i;const h=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,C=t.params.loop?Math.ceil(h/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?i=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex:typeof t.snapIndex<"u"?i=t.snapIndex:i=t.activeIndex||0,a.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const o=t.pagination.bullets;let v,p,S;if(a.dynamicBullets&&(m=K(o[0],t.isHorizontal()?"width":"height",!0),l.forEach(r=>{r.style[t.isHorizontal()?"width":"height"]=`${m*(a.dynamicMainBullets+4)}px`}),a.dynamicMainBullets>1&&t.previousIndex!==void 0&&(_+=i-(t.previousIndex||0),_>a.dynamicMainBullets-1?_=a.dynamicMainBullets-1:_<0&&(_=0)),v=Math.max(i-_,0),p=v+(Math.min(o.length,a.dynamicMainBullets)-1),S=(p+v)/2),o.forEach(r=>{r.classList.remove(...["","-next","-next-next","-prev","-prev-prev","-main"].map(g=>`${a.bulletActiveClass}${g}`))}),l.length>1)o.forEach(r=>{const g=q(r);g===i&&r.classList.add(a.bulletActiveClass),a.dynamicBullets&&(g>=v&&g<=p&&r.classList.add(`${a.bulletActiveClass}-main`),g===v&&L(r,"prev"),g===p&&L(r,"next"))});else{const r=o[i];if(r&&r.classList.add(a.bulletActiveClass),a.dynamicBullets){const g=o[v],$=o[p];for(let A=v;A<=p;A+=1)o[A]&&o[A].classList.add(`${a.bulletActiveClass}-main`);L(g,"prev"),L($,"next")}}if(a.dynamicBullets){const r=Math.min(o.length,a.dynamicMainBullets+4),g=(m*r-m)/2-S*m,$=e?"right":"left";o.forEach(A=>{A.style[t.isHorizontal()?$:"top"]=`${g}px`})}}l.forEach((o,v)=>{if(a.type==="fraction"&&(o.querySelectorAll(k(a.currentClass)).forEach(p=>{p.textContent=a.formatFractionCurrent(i+1)}),o.querySelectorAll(k(a.totalClass)).forEach(p=>{p.textContent=a.formatFractionTotal(C)})),a.type==="progressbar"){let p;a.progressbarOpposite?p=t.isHorizontal()?"vertical":"horizontal":p=t.isHorizontal()?"horizontal":"vertical";const S=(i+1)/C;let r=1,g=1;p==="horizontal"?r=S:g=S,o.querySelectorAll(k(a.progressbarFillClass)).forEach($=>{$.style.transform=`translate3d(0,0,0) scaleX(${r}) scaleY(${g})`,$.style.transitionDuration=`${t.params.speed}ms`})}a.type==="custom"&&a.renderCustom?(o.innerHTML=a.renderCustom(t,i+1,C),v===0&&u("paginationRender",o)):(v===0&&u("paginationRender",o),u("paginationUpdate",o)),t.params.watchOverflow&&t.enabled&&o.classList[t.isLocked?"add":"remove"](a.lockClass)})}function P(){const e=t.params.pagination;if(I())return;const a=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length;let l=t.pagination.el;l=y(l);let i="";if(e.type==="bullets"){let h=t.params.loop?Math.ceil(a/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&h>a&&(h=a);for(let C=0;C<h;C+=1)e.renderBullet?i+=e.renderBullet.call(t,C,e.bulletClass):i+=`<${e.bulletElement} class="${e.bulletClass}"></${e.bulletElement}>`}e.type==="fraction"&&(e.renderFraction?i=e.renderFraction.call(t,e.currentClass,e.totalClass):i=`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`),e.type==="progressbar"&&(e.renderProgressbar?i=e.renderProgressbar.call(t,e.progressbarFillClass):i=`<span class="${e.progressbarFillClass}"></span>`),l.forEach(h=>{e.type!=="custom"&&(h.innerHTML=i||""),e.type==="bullets"&&(t.pagination.bullets=[...h.querySelectorAll(k(e.bulletClass))])}),e.type!=="custom"&&u("paginationRender",l[0])}function E(){t.params.pagination=ct(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const e=t.params.pagination;if(!e.el)return;let a;typeof e.el=="string"&&t.isElement&&(a=t.el.shadowRoot.querySelector(e.el)),!a&&typeof e.el=="string"&&(a=[...document.querySelectorAll(e.el)]),a||(a=e.el),!(!a||a.length===0)&&(t.params.uniqueNavElements&&typeof e.el=="string"&&Array.isArray(a)&&a.length>1&&(a=[...t.el.querySelectorAll(e.el)],a.length>1&&(a=a.filter(l=>W(l,".swiper")[0]===t.el)[0])),Array.isArray(a)&&a.length===1&&(a=a[0]),Object.assign(t.pagination,{el:a}),a=y(a),a.forEach(l=>{e.type==="bullets"&&e.clickable&&l.classList.add(e.clickableClass),l.classList.add(e.modifierClass+e.type),l.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass),e.type==="bullets"&&e.dynamicBullets&&(l.classList.add(`${e.modifierClass}${e.type}-dynamic`),_=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),e.type==="progressbar"&&e.progressbarOpposite&&l.classList.add(e.progressbarOppositeClass),e.clickable&&l.addEventListener("click",c),t.enabled||l.classList.add(e.lockClass)}))}function N(){const e=t.params.pagination;if(I())return;let a=t.pagination.el;a&&(a=y(a),a.forEach(l=>{l.classList.remove(e.hiddenClass),l.classList.remove(e.modifierClass+e.type),l.classList.remove(t.isHorizontal()?e.horizontalClass:e.verticalClass),e.clickable&&l.removeEventListener("click",c)})),t.pagination.bullets&&t.pagination.bullets.forEach(l=>l.classList.remove(e.bulletActiveClass))}d("init",()=>{t.params.pagination.enabled===!1?H():(E(),P(),b())}),d("activeIndexChange",()=>{typeof t.snapIndex>"u"&&b()}),d("snapIndexChange",()=>{b()}),d("snapGridLengthChange",()=>{P(),b()}),d("destroy",()=>{N()}),d("enable disable",()=>{let{el:e}=t.pagination;e&&(e=y(e),e.forEach(a=>a.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),d("lock unlock",()=>{b()}),d("click",(e,a)=>{const l=a.target;let{el:i}=t.pagination;if(Array.isArray(i)||(i=[i].filter(h=>!!h)),t.params.pagination.el&&t.params.pagination.hideOnClick&&i&&i.length>0&&!l.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&l===t.navigation.nextEl||t.navigation.prevEl&&l===t.navigation.prevEl))return;const h=i[0].classList.contains(t.params.pagination.hiddenClass);u(h===!0?"paginationShow":"paginationHide"),i.forEach(C=>C.classList.toggle(t.params.pagination.hiddenClass))}});const X=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=y(e),e.forEach(a=>a.classList.remove(t.params.pagination.paginationDisabledClass))),E(),P(),b()},H=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=y(e),e.forEach(a=>a.classList.add(t.params.pagination.paginationDisabledClass))),N()};Object.assign(t.pagination,{enable:X,disable:H,render:P,update:b,init:E,destroy:N})}const{VITE_URL:j,VITE_PATH:Q}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"kevin-jiang",BASE_URL:"/finalweek/",MODE:"production",DEV:!1,PROD:!0},ut={data(){return{product:{},relatedProduct:{},NewQty:1,mainImageUrl:"",isLoading:!0}},components:{Swiper:w,SwiperSlide:tt},setup(){return{modules:[dt]}},methods:{getProduct(){this.isLoading=!0,this.$route.params.id&&this.$http.get(`${j}api/${Q}/product/${this.$route.params.id}`).then(t=>{this.product=t.data.product,this.mainImageUrl=this.product.imageUrl,this.NewQty=1,this.nowCategory=t.data.product.category,this.getProductsAll(t.data.product.category),this.isLoading=!1}).catch(()=>{R.fire({icon:"error",title:"取得產品資料失敗٩(ŏ﹏ŏ、)۶",showConfirmButton:!1,timer:1500})})},getProductsAll(t){this.$http.get(`${j}api/${Q}/products/All`).then(f=>{const u=f.data.products.filter(s=>s.category===t);this.relatedProduct=u}).catch(()=>{R.fire({icon:"error",title:"取得部落格資料失敗٩(ŏ﹏ŏ、)۶",showConfirmButton:!1,timer:1500})})},changeMainImage(t){this.mainImageUrl=t},...et(F,["addToCart"])},watch:{$route(){this.getProduct(),window.scrollTo(0,0)}},mounted(){this.getProduct()},computed:{...V(F,["cart"]),...V(F,["loadingItem"])}},M=t=>(ot("data-v-7607c434"),t=t(),rt(),t),mt=M(()=>n("div",{id:"load"},[n("div",null,"G"),n("div",null,"N"),n("div",null,"I"),n("div",null,"D"),n("div",null,"A"),n("div",null,"O"),n("div",null,"L")],-1)),ft={class:"container"},pt=M(()=>n("h2",{class:"mt-18 mb-5"},"單一產品",-1)),gt={class:"row"},ht={class:"col-lg-5"},vt=["src"],_t={class:"row mt-3"},yt=["src"],bt=["src","onClick"],Ct={class:"col-lg-7"},xt={class:"card mt-20 border-0"},Lt={class:"card-body p-5"},$t={class:"card-title"},At={class:"card-text mt-4 break-after"},It={class:"fs-3 text-primary fw-semibold"},St={class:"fs-4 ms-3 text-textSecondary fw-normal"},Bt={class:"d-lg-flex mt-lg-5"},kt={class:"d-flex align-items-center mb-3 mb-lg-0"},Mt=M(()=>n("label",{for:"input-quantity",class:"me-2"}," 數量 ",-1)),Pt=["disabled"],Tt=["disabled"],Dt=nt('<div class="col-12 text-center mt-18" data-v-7607c434><div class="bg-secondary p-8 pb-12" data-v-7607c434><h2 class="" data-v-7607c434>產品說明</h2><h4 class="mt-5" data-v-7607c434>說明</h4><p data-v-7607c434>幫助愛寵預防口腔問題，且維持口腔清新、健康</p><h4 class="mt-5" data-v-7607c434>內容</h4><p data-v-7607c434> - 每包8根 - 適用年齡建議4個月以上 - 建議一天 1 - 2 根</p></div></div>',1),zt={class:"my-18"},Et=M(()=>n("h2",{class:"text-center mb-10"},"相關產品",-1)),Nt={class:"card border-0 rounded-0 mb-4 card-overlay"},Ot={class:"position-relative"},Ut=["src"],Ft=M(()=>n("div",{class:"overlay d-flex justify-content-center"},[n("p",{class:"mb-0 text-white m-0 p-2 w-100 fs-3 d-flex justify-content-center opacity-75"}," 查看更多 ")],-1)),Ht={class:"card-body text-center"},qt={class:"card-title text-hover-black"},Vt={class:"text-primary mb-1"},Gt={class:"text-textSecondary"};function Rt(t,f,d,u,s,m){const _=z("AppLoading"),y=z("router-link"),I=z("swiper-slide"),L=z("swiper");return B(),T(U,null,[n("div",null,[O(_,{active:s.isLoading,"onUpdate:active":f[0]||(f[0]=c=>s.isLoading=c)},{default:D(()=>[mt]),_:1},8,["active"])]),n("div",ft,[pt,n("div",gt,[n("div",ht,[n("img",{class:"img-fluid w-100",src:s.mainImageUrl,alt:"單一產品圖"},null,8,vt),n("div",_t,[(B(!0),T(U,null,G(s.product.imagesUrl,(c,b)=>(B(),T("div",{class:"col-md-3 d-flex",key:b+"image"},[n("img",{src:s.product.imageUrl,alt:"次要圖片",class:"img-fluid me-2 img-hover",onClick:f[1]||(f[1]=()=>m.changeMainImage(s.product.imageUrl))},null,8,yt),n("img",{src:c,alt:"次要圖片",class:"img-fluid img-hover",onClick:()=>m.changeMainImage(c)},null,8,bt)]))),128))])]),n("div",Ct,[n("div",xt,[n("div",Lt,[n("h2",$t,x(s.product.title),1),n("p",At,x(s.product.description),1),n("p",It,[at("NT$"+x(s.product.price)+" ",1),n("del",St,"NT$"+x(s.product.origin_price),1)]),n("div",Bt,[n("div",kt,[Mt,lt(n("input",{type:"number",name:"quantity",min:"1",id:"input-quantity",class:"form-control w-auto me-2 rounded-0 p-lg-3","onUpdate:modelValue":f[2]||(f[2]=c=>s.NewQty=c),disabled:t.loadingItem===s.product.id},null,8,Pt),[[st,s.NewQty]])]),n("button",{type:"button",class:"btn btn-primary text-white me-2 rounded-0 p-lg-3",onClick:f[3]||(f[3]=()=>t.addToCart(s.product.id,s.NewQty)),disabled:t.loadingItem===s.product.id}," 加入購物車 ",8,Tt)])])])]),Dt,n("div",zt,[Et,O(L,{pagination:!0,modules:u.modules,class:"mySwiper","slides-per-view":3,"slides-per-group":3,"space-between":15},{default:D(()=>[(B(!0),T(U,null,G(s.relatedProduct,c=>(B(),it(I,{key:c.id+"relatedProduct"},{default:D(()=>[O(y,{to:`/product/${c.id}`},{default:D(()=>[n("div",Nt,[n("div",Ot,[n("img",{src:c.imageUrl,class:"card-img-top rounded-0",alt:"貓咪產品"},null,8,Ut),Ft]),n("div",Ht,[n("h5",qt,x(c.title),1),n("p",Vt,"NT$"+x(c.price),1),n("del",Gt,"NT$"+x(c.origin_price),1)])])]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1},8,["modules"])])])])],64)}const Yt=Z(ut,[["render",Rt],["__scopeId","data-v-7607c434"]]);export{Yt as default};
