import{S as l}from"./sweetalert2.all-91b9c703.js";import{_ as b,c as d,b as t,d as f,w as v,F as _,j as y,t as a,r as x,o as r,A as w,B as C,p as L,f as I}from"./index-eb793fcd.js";const{VITE_URL:h,VITE_PATH:u}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"kevin-jiang",BASE_URL:"/finalweek/",MODE:"production",DEV:!1,PROD:!0},S={data(){return{cartList:{},isLoading:!0,loadingItem:"",total:0,data:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart(){this.isLoading=!0,this.$http.get(`${h}api/${u}/cart`).then(e=>{this.cartList=e.data.data.carts,this.total=e.data.data.total,this.isLoading=!1}).catch(()=>{l.fire({icon:"error",title:"取得購物車資料失敗٩(ŏ﹏ŏ、)۶",showConfirmButton:!1,timer:1500})})},deleteSingle(e){this.loadingItem=e.id,this.$http.delete(`${h}api/${u}/cart/${e.id}`).then(i=>{l.fire({position:"top-end",icon:"success",title:"成功刪除單一產品d(`･∀･)b",showConfirmButton:!1,timer:1500,toast:!0}),this.getCart(),this.loadingItem=""}).catch(()=>{l.fire({icon:"error",title:"刪除單一品項失敗٩(ŏ﹏ŏ、)۶",showConfirmButton:!1,timer:1500})})},editNum(e){const i={product_id:e.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${h}api/${u}/cart/${e.id}`,{data:i}).then(p=>{l.fire({position:"top-end",icon:"success",title:"成功修改數量",showConfirmButton:!1,timer:1500,toast:!0}),this.getCart(),this.loadingItem=""}).catch(()=>{l.fire({icon:"error",title:"修改數量失敗(｡ŏ_ŏ)",showConfirmButton:!1,timer:1500})})},returnRouter(){this.$router.push("/order")}},mounted(){this.getCart()}},o=e=>(L("data-v-c756ad82"),e=e(),I(),e),V=o(()=>t("div",{id:"load"},[t("div",null,"G"),t("div",null,"N"),t("div",null,"I"),t("div",null,"D"),t("div",null,"A"),t("div",null,"O"),t("div",null,"L")],-1)),k={class:"container"},B=o(()=>t("h2",{class:"my-12"},"購物車清單",-1)),E=o(()=>t("div",{class:"w-75 mx-auto mt-30"},[t("ul",{class:"progressbar list-unstyled d-flex justify-content-between mb-0"},[t("li",{class:"active"},"購物車"),t("li",null,"填寫資料"),t("li",null,"完成訂單")]),t("div",{class:"progress",style:{height:"5px"}},[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"33.3","aria-valuemin":"0","aria-valuemax":"100",style:{width:"1%"}})])],-1)),A={class:"border border-secondary mt-15 mb-30"},R=o(()=>t("div",{class:"w-100 bg-secondary p-4"},[t("p",{class:"mb-0"},"購物車")],-1)),T={class:"p-4 pb-30"},$={class:"table align-middle mb-0"},D=o(()=>t("thead",null,[t("tr",null,[t("th",{width:"50px"}),t("th",{scope:"col",class:"text-center"},"品名"),t("th",{scope:"col",width:"100px"},"單價"),t("th",{scope:"col",width:"220px",class:"text-center"},"數量"),t("th",{class:"text-end",width:"150px"},"小計")])],-1)),U={class:""},N=["onClick","disabled"],j={class:"text-center"},q={class:"fs-5"},O={class:"d-flex justify-content-center"},F={class:"input-group w-50"},H=["onUpdate:modelValue","onChange","disabled"],M={class:"input-group-text bg-secondary border-secondary"},G={class:"text-end fs-5"},X=o(()=>t("td",null,null,-1)),z=o(()=>t("td",null,null,-1)),J=o(()=>t("td",null,null,-1)),K=o(()=>t("td",null,null,-1)),Q={class:"fs-5 text-end fw-bold"},W={key:1},Y=o(()=>t("td",null,null,-1)),Z=o(()=>t("td",{class:"text-secondary text-end"},[t("h3",{class:"mt-3"},"購物車目前沒東西~")],-1)),P=o(()=>t("td",null,null,-1)),tt=o(()=>t("td",null,null,-1)),et=o(()=>t("td",null,null,-1)),st=[Y,Z,P,tt,et],ot={class:"text-end mt-10"};function it(e,i,p,nt,n,c){const m=x("AppLoading");return r(),d(_,null,[t("div",null,[f(m,{active:n.isLoading,"onUpdate:active":i[0]||(i[0]=s=>n.isLoading=s)},{default:v(()=>[V]),_:1},8,["active"])]),t("div",k,[B,E,t("div",A,[R,t("div",T,[t("table",$,[D,t("tbody",U,[n.cartList.length!==0?(r(),d(_,{key:0},[(r(!0),d(_,null,y(n.cartList,s=>(r(),d("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:()=>c.deleteSingle(s),disabled:n.loadingItem===s.id}," X ",8,N)]),t("td",j,a(s.product.title),1),t("td",q,a(s.product.price),1),t("td",O,[t("div",F,[w(t("input",{"onUpdate:modelValue":g=>s.qty=g,type:"number",min:"1",class:"form-control border-secondary",onChange:()=>c.editNum(s),disabled:n.loadingItem===s.id},null,40,H),[[C,s.qty]]),t("span",M,a(s.product.unit),1)])]),t("td",G," $"+a(s.total.toLocaleString()),1)]))),128)),t("tr",null,[X,z,J,K,t("td",Q," 總計： $"+a(n.total.toLocaleString()),1)])],64)):(r(),d("tr",W,st))])]),t("div",ot,[t("button",{onClick:i[1]||(i[1]=(...s)=>c.returnRouter&&c.returnRouter(...s)),type:"button",class:"btn btn-primary btn-lg"},"確認訂單")])])])])],64)}const at=b(S,[["render",it],["__scopeId","data-v-c756ad82"]]);export{at as default};
