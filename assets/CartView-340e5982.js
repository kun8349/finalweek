import{_ as v,a as f,m as w,c as l,b as t,d as x,w as C,F as d,j as I,t as a,A as p,B as u,l as _,r as k,o as i,p as T,f as S}from"./index-d9a35d42.js";import{S as m}from"./sweetalert2.all-ad3517e2.js";import{c as h}from"./cart-02f59f00.js";const{VITE_URL:L,VITE_PATH:V}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"kevin-jiang",BASE_URL:"/finalweek/",MODE:"production",DEV:!1,PROD:!0},A={data(){return{data:{user:{name:"",email:"",tel:"",address:""},message:""},code:""}},methods:{editNum(e){const n={product_id:e.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${L}api/${V}/cart/${e.id}`,{data:n}).then(b=>{m.fire({position:"top-end",icon:"success",title:"成功修改數量",showConfirmButton:!1,timer:1500,toast:!0,customClass:{container:"swal2-container"}}),this.getToCart(),this.loadingItem=""}).catch(()=>{m.fire({icon:"error",title:"修改數量失敗(｡ŏ_ŏ)",showConfirmButton:!1,timer:1500})})},returnRouter(){this.$router.push("/order")},returnRouterHome(){this.$router.push("/"),window.scrollTo(0,0)},...f(h,["deleteSingle","getToCart","getCoupon"])},computed:{...w(h,["cart","loadingItem","total","couponPrice","isToLoading"])},mounted(){this.getToCart()}},o=e=>(T("data-v-3ea4900e"),e=e(),S(),e),E=o(()=>t("div",{id:"load"},[t("div",null,"G"),t("div",null,"N"),t("div",null,"I"),t("div",null,"D"),t("div",null,"A"),t("div",null,"O"),t("div",null,"L")],-1)),R={class:"container"},$=o(()=>t("h2",{class:"my-12"},"購物車清單",-1)),B=o(()=>t("div",{class:"w-75 mx-auto mt-30"},[t("ul",{class:"progressbar list-unstyled d-flex justify-content-between mb-0"},[t("li",{class:"active"},"購物車"),t("li",null,"填寫資料"),t("li",null,"完成訂單")]),t("div",{class:"progress",style:{height:"5px"}},[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"33.3","aria-valuemin":"0","aria-valuemax":"100",style:{width:"1%"}})])],-1)),U={class:"border border-secondary mt-15 mb-15"},j=o(()=>t("div",{class:"w-100 bg-secondary p-4"},[t("p",{class:"mb-0"},"購物車")],-1)),D={class:"p-4 pb-30"},F={key:0,class:"table-responsive"},N={class:"table align-middle mb-0"},q=o(()=>t("thead",null,[t("tr",null,[t("th",{width:"50px",class:""},"刪除"),t("th",{scope:"col",class:"text-center"},"品名"),t("th",{scope:"col",width:"100px"},"單價"),t("th",{scope:"col",width:"220px",class:""},"數量"),t("th",{class:"text-end",width:"150px"},"小計")])],-1)),H={class:""},O={class:""},M=["onClick","disabled"],G=o(()=>t("span",{class:"material-symbols-outlined"}," delete ",-1)),z=[G],J={class:"text-center"},K={class:"fs-5"},Q={class:""},W={class:"input-group",style:{width:"100px"}},X=["onUpdate:modelValue","onChange","disabled"],Y={class:"input-group-text bg-secondary border-secondary"},Z={class:"text-end fs-5"},P=o(()=>t("td",null,null,-1)),tt=o(()=>t("td",null,null,-1)),et=o(()=>t("td",null,null,-1)),st=o(()=>t("td",null,null,-1)),ot={class:"fs-5 text-end"},nt=o(()=>t("div",{class:"mt-3"},[t("button",{type:"button",class:"btn btn-outline-primary",style:{width:"100px"}}," 繼續購物 ")],-1)),lt={key:1,class:"text-center py-6"},it=o(()=>t("h2",{class:"pb-5"},"購物車目前沒有商品",-1)),at={class:"mt-10 d-flex align-items-end justify-content-between"},dt={class:"d-flex flex-column justify-content-between"},rt={class:"d-lg-flex mt-10"},ct=o(()=>t("label",{for:"exampleFormControlInput1",class:"form-label"},null,-1)),pt=o(()=>t("label",{for:"exampleFormControlInput1",class:"form-label"},null,-1)),ut=o(()=>t("input",{type:"text",class:"form-control me-2",id:"exampleFormControlInput1",style:{width:"100px"},value:"已折扣",disabled:""},null,-1)),_t=["disabled"],mt={class:"text-end"},ht={class:"fs-4 text-success mb-5"},bt={key:0},gt={key:1},yt={class:"fs-4 text-end fw-bold mb-5"},vt=["disabled"];function ft(e,n,b,wt,r,c){const g=k("AppLoading");return i(),l(d,null,[t("div",null,[x(g,{active:e.isToLoading,"onUpdate:active":n[0]||(n[0]=s=>e.isToLoading=s)},{default:C(()=>[E]),_:1},8,["active"])]),t("div",R,[$,B,t("div",U,[j,t("div",D,[e.cart.length!==0?(i(),l("div",F,[t("table",N,[q,t("tbody",H,[(i(!0),l(d,null,I(e.cart,s=>(i(),l("tr",{key:s.id},[t("td",O,[t("button",{type:"button",class:"btn btn-sm btn-outline-danger d-flex justify-content-center align-items-center",onClick:()=>e.deleteSingle(s),disabled:e.loadingItem===s.id},z,8,M)]),t("td",J,a(s.product.title),1),t("td",K,a(s.product.price),1),t("td",Q,[t("div",W,[p(t("input",{"onUpdate:modelValue":y=>s.qty=y,type:"number",min:"1",class:"form-control border-secondary",onChange:()=>c.editNum(s),disabled:e.loadingItem===s.id},null,40,X),[[u,s.qty]]),t("span",Y,a(s.product.unit),1)])]),t("td",Z," $"+a(s.total.toLocaleString()),1)]))),128)),t("tr",null,[P,tt,et,st,t("td",ot," 總計： $"+a(e.total.toLocaleString()),1)]),nt])])])):(i(),l("div",lt,[it,t("button",{type:"button",class:"btn btn-primary btn-lg",onClick:n[1]||(n[1]=()=>c.returnRouterHome())}," 前往選購 ")])),t("div",at,[t("div",dt,[t("div",rt,[e.couponPrice==0?(i(),l(d,{key:0},[ct,p(t("input",{type:"text",class:"form-control me-2",id:"exampleFormControlInput1",style:{width:"100px"},"onUpdate:modelValue":n[2]||(n[2]=s=>r.code=s)},null,512),[[u,r.code]])],64)):(i(),l(d,{key:1},[pt,ut],64)),t("button",{type:"button",class:"btn btn-outline-primary btn-lg mt-lg-0 mt-5",onClick:n[3]||(n[3]=()=>e.getCoupon(r.code)),disabled:e.couponPrice!=0}," 優惠碼 ",8,_t)])]),t("div",mt,[t("p",ht,[_(" 折扣：$ "),e.couponPrice!=0?(i(),l("span",bt,a(e.couponPrice),1)):(i(),l("span",gt,"0"))]),t("p",yt,[_(" 訂單總金額：$ "),t("span",null,a((e.total-e.couponPrice).toLocaleString()),1)]),t("button",{onClick:n[4]||(n[4]=()=>c.returnRouter()),type:"button",class:"btn btn-primary btn-lg",disabled:e.cart.length===0}," 確認結帳 ",8,vt)])])])])])],64)}const kt=v(A,[["render",ft],["__scopeId","data-v-3ea4900e"]]);export{kt as default};
